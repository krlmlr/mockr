<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mocking in R • mockr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">mockr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/krlmlr/mockr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="mockr-travis-ci-build-status-coverage-status" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mockr-travis-ci-build-status-coverage-status" class="anchor"> </a>mockr <a href="https://travis-ci.org/krlmlr/mockr"><img src="https://travis-ci.org/krlmlr/mockr.svg?branch=master" alt="Travis-CI Build Status"></a><a href="https://codecov.io/github/krlmlr/mockr?branch=master"><img src="https://img.shields.io/codecov/c/github/krlmlr/mockr/master.svg" alt="Coverage Status"></a>
</h1></div>
<p>The goal of mockr is to provide a drop-in replacement for <code>testthat::with_mock()</code> which will be deprecated in the next version of <code>testthat</code>. The only exported function, <code><a href="reference/with_mock.html">with_mock()</a></code>, is modeled closely after the original implementation, but now only allows mocking functions in the package under test. In contrast to the original implementation, no fiddling with R’s internals is needed, and the implementation plays well with byte-compiled code.</p>
<ul>
<li>If you need to mock an external function, write a wrapper.</li>
<li>The original implementation allowed modifying the behavior of other packages’ functions. this is discouraged (and not possible with this implementation).</li>
</ul>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"> </a>Example</h2>
<pre><code>#&gt; Loading mockr</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">some_func &lt;-<span class="st"> </span>function() <span class="kw">stop</span>(<span class="st">"oops"</span>)
some_other_func &lt;-<span class="st"> </span>function() <span class="kw">some_func</span>()

<span class="co"># Calling this function gives an error</span>
<span class="kw">some_other_func</span>()
<span class="co">#&gt; Error in some_func(): oops</span>

tester_func &lt;-<span class="st"> </span>function() {
  <span class="co"># Here, we override the function that raises the error</span>
  <span class="kw"><a href="reference/with_mock.html">with_mock</a></span>(
    <span class="dt">some_func =</span> function() <span class="dv">42</span>,
    <span class="kw">some_other_func</span>()
  )
}

<span class="co"># No error raised</span>
<span class="kw">tester_func</span>()
<span class="co">#&gt; Error: some_func not found in environment R_GlobalEnv.</span>

<span class="co"># Mocking doesn't override functions in the same environment by design</span>
<span class="kw"><a href="reference/with_mock.html">with_mock</a></span>(<span class="dt">some_func =</span> function() <span class="dv">6</span> *<span class="st"> </span><span class="dv">7</span>, <span class="kw">some_other_func</span>())
<span class="co">#&gt; Error: some_func not found in environment R_GlobalEnv.</span></code></pre></div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"> </a>Installation</h2>
<p>Install from GitHub via</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"krlmlr/mockr"</span>)</code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/krlmlr/mockr">https://​github.com/​krlmlr/​mockr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/krlmlr/mockr/issues">https://​github.com/​krlmlr/​mockr/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Kirill Müller <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kirill Müller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
